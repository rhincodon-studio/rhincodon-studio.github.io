"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[3824],{2861:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>a,contentTitle:()=>d,default:()=>h,frontMatter:()=>r,metadata:()=>t,toc:()=>o});const t=JSON.parse('{"id":"devops/ci/modern-git-flow","title":"\u73fe\u4ee3\u5316 Git Flow\uff08Trunk-Based + Release Tagging + Hotfix\uff09","description":"\u672c\u7bc7\u4ecb\u7d39\u4e00\u7a2e \u6975\u7c21\u3001\u6613\u7dad\u8b77\u3001CI/CD \u53cb\u5584\u7684 Git Flow\uff0c\u9069\u5408\u5e0c\u671b\u6e1b\u5c11\u5206\u652f\u8907\u96dc\u5ea6\u3001\u63d0\u9ad8\u4ea4\u4ed8\u901f\u5ea6\u7684\u5718\u968a\u3002","source":"@site/docs/devops/ci/modern-git-flow.md","sourceDirName":"devops/ci","slug":"/devops/git-flow","permalink":"/docs/devops/git-flow","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/devops/ci/modern-git-flow.md","tags":[{"inline":true,"label":"git","permalink":"/docs/tags/git"},{"inline":true,"label":"devops","permalink":"/docs/tags/devops"},{"inline":true,"label":"trunk-based","permalink":"/docs/tags/trunk-based"},{"inline":true,"label":"git-flow","permalink":"/docs/tags/git-flow"},{"inline":true,"label":"ci-cd","permalink":"/docs/tags/ci-cd"}],"version":"current","sidebarPosition":1,"frontMatter":{"id":"modern-git-flow","title":"\u73fe\u4ee3\u5316 Git Flow\uff08Trunk-Based + Release Tagging + Hotfix\uff09","sidebar_label":"Modern Git Flow","slug":"/devops/git-flow","tags":["git","devops","trunk-based","git-flow","ci-cd"],"sidebar_position":1},"sidebar":"tutorialSidebar","previous":{"title":"Continuous Integration","permalink":"/docs/category/continuous-integration"},"next":{"title":"GitHub Actions \u5b89\u88dd","permalink":"/docs/devops/ci/github-action-install"}}');var l=i(4848),s=i(8453);const r={id:"modern-git-flow",title:"\u73fe\u4ee3\u5316 Git Flow\uff08Trunk-Based + Release Tagging + Hotfix\uff09",sidebar_label:"Modern Git Flow",slug:"/devops/git-flow",tags:["git","devops","trunk-based","git-flow","ci-cd"],sidebar_position:1},d="\u73fe\u4ee3\u5316 Git Flow\uff08Trunk-Based + Release Tagging + Hotfix\uff09",a={},o=[{value:"Flowchart",id:"flowchart",level:2},{value:"Flowchart\uff08\u542b Hotfix\uff09",id:"flowchart\u542b-hotfix",level:2},{value:"Sequence Diagram",id:"sequence-diagram",level:2}];function c(e){const n={blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",header:"header",hr:"hr",li:"li",mermaid:"mermaid",ol:"ol",p:"p",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,s.R)(),...e.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(n.header,{children:(0,l.jsx)(n.h1,{id:"\u73fe\u4ee3\u5316-git-flowtrunk-based--release-tagging--hotfix",children:"\u73fe\u4ee3\u5316 Git Flow\uff08Trunk-Based + Release Tagging + Hotfix\uff09"})}),"\n",(0,l.jsxs)(n.p,{children:["\u672c\u7bc7\u4ecb\u7d39\u4e00\u7a2e ",(0,l.jsx)(n.strong,{children:"\u6975\u7c21\u3001\u6613\u7dad\u8b77\u3001CI/CD \u53cb\u5584\u7684 Git Flow"}),"\uff0c\u9069\u5408\u5e0c\u671b\u6e1b\u5c11\u5206\u652f\u8907\u96dc\u5ea6\u3001\u63d0\u9ad8\u4ea4\u4ed8\u901f\u5ea6\u7684\u5718\u968a\u3002"]}),"\n",(0,l.jsx)(n.p,{children:"\u6b64\u6d41\u7a0b\u7d50\u5408\uff1a"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.strong,{children:"Trunk-Based Development\uff08\u4e3b\u5e79\u958b\u767c\uff09"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.strong,{children:"Semantic Versioning\uff08\u8a9e\u7fa9\u5316\u7248\u672c\uff09"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.strong,{children:"Release Tagging\uff08RC / Release Tag \u90e8\u7f72\uff09"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.strong,{children:"Hotfix Patch Branch\uff08\u50c5\u65bc\u6b63\u5f0f\u5340\u6709 bug \u6642\u4f7f\u7528\uff09"})}),"\n"]}),"\n",(0,l.jsx)(n.hr,{}),"\n",(0,l.jsx)(n.h1,{id:"\u6d41\u7a0b\u7e3d\u89bd",children:"\u6d41\u7a0b\u7e3d\u89bd"}),"\n",(0,l.jsxs)(n.table,{children:[(0,l.jsx)(n.thead,{children:(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.th,{children:"\u52d5\u4f5c"}),(0,l.jsx)(n.th,{children:"Trigger"}),(0,l.jsx)(n.th,{children:"\u90e8\u7f72\u74b0\u5883"})]})}),(0,l.jsxs)(n.tbody,{children:[(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"Push \u4efb\u610f\u5206\u652f"}),(0,l.jsx)(n.td,{children:"branch pipeline"}),(0,l.jsx)(n.td,{children:"Build & Test"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsxs)(n.td,{children:["Merge \u2192 ",(0,l.jsx)(n.code,{children:"main"})]}),(0,l.jsx)(n.td,{children:"main pipeline"}),(0,l.jsx)(n.td,{children:(0,l.jsx)(n.strong,{children:"Deploy to DEV"})})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsxs)(n.td,{children:["Tag ",(0,l.jsx)(n.code,{children:"vX.Y.Z-rcN"})]}),(0,l.jsx)(n.td,{children:"RC pipeline"}),(0,l.jsx)(n.td,{children:(0,l.jsx)(n.strong,{children:"Deploy to TEST/QAS"})})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsxs)(n.td,{children:["Tag ",(0,l.jsx)(n.code,{children:"vX.Y.Z"})]}),(0,l.jsx)(n.td,{children:"Release pipeline"}),(0,l.jsx)(n.td,{children:(0,l.jsx)(n.strong,{children:"Deploy to PRD"})})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"Hotfix from Tag"}),(0,l.jsx)(n.td,{children:"hotfix pipeline"}),(0,l.jsx)(n.td,{children:"Build & Test"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsxs)(n.td,{children:["Hotfix Tag ",(0,l.jsx)(n.code,{children:"vX.Y.Z-rcN"})]}),(0,l.jsx)(n.td,{children:"hotfix RC pipeline"}),(0,l.jsx)(n.td,{children:(0,l.jsx)(n.strong,{children:"Deploy TEST/QAS"})})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsxs)(n.td,{children:["Hotfix Tag ",(0,l.jsx)(n.code,{children:"vX.Y.Z"})]}),(0,l.jsx)(n.td,{children:"hotfix release pipeline"}),(0,l.jsx)(n.td,{children:(0,l.jsx)(n.strong,{children:"Deploy PRD"})})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"Hotfix PR \u2192 main"}),(0,l.jsx)(n.td,{children:"merge pipeline"}),(0,l.jsx)(n.td,{children:"Sync \u56de\u4e3b\u5e79"})]})]})]}),"\n",(0,l.jsx)(n.hr,{}),"\n",(0,l.jsx)(n.h1,{id:"\u9019\u662f\u54ea\u7a2e-git-flow",children:"\u9019\u662f\u54ea\u7a2e Git Flow\uff1f"}),"\n",(0,l.jsx)(n.p,{children:"\u6b64\u6d41\u7a0b\u5c6c\u65bc\uff1a"}),"\n",(0,l.jsx)(n.h1,{id:"trunk-based-development--tag-driven-release--hotfix-patch-branching",children:(0,l.jsx)(n.strong,{children:"Trunk-Based Development + Tag-Driven Release + Hotfix Patch Branching"})}),"\n",(0,l.jsx)(n.p,{children:"\u5b83\u4e0d\u662f\u50b3\u7d71 GitFlow\uff08\u6c92\u6709 develop / release \u7b49\u9577\u671f\u5206\u652f\uff09\u3002\n\u4e5f\u4e0d\u662f GitHub Flow\uff08GitHub Flow \u4e0d\u4f7f\u7528 tag \u4f86\u5340\u5206\u74b0\u5883\u90e8\u7f72\uff09\u3002"}),"\n",(0,l.jsx)(n.p,{children:"\u9019\u7a2e\u8a2d\u8a08\u7684\u6838\u5fc3\u7cbe\u795e\u662f\uff1a"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"main \u4f5c\u70ba\u552f\u4e00\u9577\u671f\u5206\u652f"}),"\n",(0,l.jsx)(n.li,{children:"feature/hotfix \u5206\u652f\u5b58\u6d3b\u6975\u77ed"}),"\n",(0,l.jsx)(n.li,{children:"\u4ee5 Tag \u6c7a\u5b9a\u90e8\u7f72\u5340\u57df\uff08RC \u2192 \u6e2c\u8a66\u3001\u6b63\u5f0f Tag \u2192 PRD\uff09"}),"\n",(0,l.jsx)(n.li,{children:"\u4ee5\u81ea\u52d5\u5316 pipeline \u53d6\u4ee3\u904e\u53bb\u8907\u96dc\u7684 release \u5206\u652f"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:"\u512a\u9ede"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"\u5206\u652f\u6578\u6975\u5c11\u3001\u908f\u8f2f\u7c21\u55ae"}),"\n",(0,l.jsx)(n.li,{children:"\u81ea\u52d5\u5316\u53cb\u5584\uff08CI/CD \u4e0d\u9700\u8981\u5224\u65b7\u592a\u591a\u72c0\u6cc1\uff09"}),"\n",(0,l.jsx)(n.li,{children:"\u964d\u4f4e\u9577\u671f\u5206\u652f\u9020\u6210\u7684\u7248\u672c\u6f02\u79fb"}),"\n",(0,l.jsx)(n.li,{children:"RC / Release tag \u8207\u90e8\u7f72\u74b0\u5883\u7cbe\u6e96\u7d81\u5b9a"}),"\n",(0,l.jsx)(n.li,{children:"\u4e0d\u9700\u8981\u89e3\u91cb GitFlow \u7684 develop/release/hotfix \u6d41\u7a0b"}),"\n",(0,l.jsx)(n.li,{children:"\u66f4\u7b26\u5408\u73fe\u4ee3 DevOps \u7684\u8fed\u4ee3\u901f\u5ea6"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:"\u2e3b"}),"\n",(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsx)(n.p,{children:"\u662f\u7684\uff0c\u9019\u662f\u4e00\u7a2e trade-off\u3002\n\u5728\u591a\u5c08\u6848\u3001\u591a\u4eba\u5354\u4f5c\u7684\u60c5\u5883\u4e0b\uff0c\u8981\u8b93\u6bcf\u4f4d\u958b\u767c\u8005\u90fd\u5b8c\u6574\u7406\u89e3 GitFlow \u7684\u5206\u652f\u7b56\u7565\u5f88\u4e0d\u5bb9\u6613\u3002\n\u800c\u4e14\u4e0d\u540c\u5c08\u6848\u7d93\u5e38\u5728\u540c\u4e00\u5e73\u53f0\u4e0a\u4e26\u884c\u958b\u767c\uff0c\u8981\u8b93\u5927\u5bb6\u300c\u6b63\u78ba\u5730\u5efa\u7acb develop\u3001feature\u3001release \u5206\u652f\u300d\u5e38\u6703\u9020\u6210\u6e9d\u901a\u6210\u672c\u3001\u751a\u81f3\u64cd\u4f5c\u6df7\u4e82\u3002"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:"\u4f7f\u7528 Trunk-Based Development + Tag Release \u7684\u65b9\u5f0f\uff0c\u5206\u652f\u5c11\u3001\u898f\u5247\u7c21\u55ae\u3001\u90e8\u7f72\u884c\u70ba\u660e\u78ba\uff0c\u4e5f\u66f4\u5bb9\u6613\u6559\u80b2\u65b0\u540c\u4ec1\u6216\u8de8\u5c08\u6848\u5718\u968a\u3002"}),"\n",(0,l.jsx)(n.hr,{}),"\n",(0,l.jsx)(n.h1,{id:"git-flow-\u4e3b\u6d41\u7a0b\u958b\u767c--\u6e2c\u8a66--\u6b63\u5f0f",children:"Git Flow \u4e3b\u6d41\u7a0b\uff08\u958b\u767c \u2192 \u6e2c\u8a66 \u2192 \u6b63\u5f0f\uff09"}),"\n",(0,l.jsx)(n.h2,{id:"flowchart",children:"Flowchart"}),"\n",(0,l.jsx)(n.mermaid,{value:"flowchart TD\n\n    A[\u958b\u767c\u8005\u5efa\u7acb\u4efb\u610f branch] --\x3e B[Push]\n    B --\x3e C[CI: Build/Test \u6240\u6709 branch]\n\n    C --\x3e|Merge PR \u5230 main| D[main]\n    D --\x3e E[CI: \u81ea\u52d5\u90e8\u7f72 DEV]\n\n    C --\x3e|tag vX.Y.Z-rcN| F[Release Candidate Tag]\n    F --\x3e G[CI: \u90e8\u7f72\u5230 TEST/QAS]\n\n    C --\x3e|tag vX.Y.Z| H[\u6b63\u5f0f Release Tag]\n    H --\x3e I[CI: \u90e8\u7f72\u5230 PRD]"}),"\n",(0,l.jsx)(n.hr,{}),"\n",(0,l.jsx)(n.h1,{id:"hotfix-\u6d41\u7a0b\u6b63\u5f0f\u5340-bug-\u4fee\u88dc",children:"Hotfix \u6d41\u7a0b\uff08\u6b63\u5f0f\u5340 BUG \u4fee\u88dc\uff09"}),"\n",(0,l.jsx)(n.p,{children:"\u7576\u751f\u7522\u74b0\u5883\uff08PRD\uff09\u767c\u73fe bug \u6642\uff1a"}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsx)(n.li,{children:"\u5f9e\u5c0d\u61c9\u7684 \u6b63\u5f0f\u7248 tag\uff08vX.Y.Z\uff09 checkout \u51fa hotfix branch"}),"\n",(0,l.jsx)(n.li,{children:"\u4fee\u6b63\u5f8c\u6253 RC Tag \u2192 \u81ea\u52d5\u90e8\u7f72\u6e2c\u8a66"}),"\n",(0,l.jsx)(n.li,{children:"\u6e2c\u8a66\u9a57\u8b49\u5f8c\u6253\u6b63\u5f0f Tag \u2192 \u81ea\u52d5\u90e8\u7f72\u6b63\u5f0f"}),"\n",(0,l.jsx)(n.li,{children:"\u6700\u5f8c PR \u56de main\uff08\u4fdd\u6301\u4e3b\u5e79\u4e00\u81f4\uff09"}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"flowchart\u542b-hotfix",children:"Flowchart\uff08\u542b Hotfix\uff09"}),"\n",(0,l.jsx)(n.mermaid,{value:"flowchart TD\n    %% === Regular ===\n    A[\u958b\u767c\u8005\u5efa\u7acb feature branch] --\x3e B[Push \u4efb\u610f branch]\n    B --\x3e C[CI: Build/Test]\n\n    C --\x3e|Merge \u5230 main| D[main]\n    D --\x3e E[CI: Deploy DEV]\n\n    C --\x3e|tag vX.Y.Z-rcN| F[RC Tag]\n    F --\x3e G[Deploy TEST/QAS]\n\n    C --\x3e|tag vX.Y.Z| H[\u6b63\u5f0f Release Tag]\n    H --\x3e I[Deploy PRD]\n\n    %% === Hotfix ===\n    I --\x3e J[\u6b63\u5f0f\u74b0\u5883\u767c\u73fe bug]\n    J --\x3e K[\u5f9e tag vX.Y.Z \u5efa\u7acb hotfix branch]\n    K --\x3e L[Push hotfix branch]\n    L --\x3e M[CI: Build/Test]\n\n    M --\x3e|tag vX.Y.Z-rcN| N[Hotfix RC]\n    N --\x3e O[Deploy TEST/QAS]\n\n    O --\x3e|tag vX.Y.Z| P[Hotfix Release]\n    P --\x3e Q[Deploy PRD]\n\n    Q --\x3e R[PR \u56de main]\n    R --\x3e S[main \u66f4\u65b0\u5b8c\u6210]"}),"\n",(0,l.jsx)(n.h2,{id:"sequence-diagram",children:"Sequence Diagram"}),"\n",(0,l.jsx)(n.mermaid,{value:"\nsequenceDiagram\n    actor Dev as Developer\n    participant Git as Git Repository\n    participant CI as CI Pipeline\n    participant DEV as DEV Env\n    participant QAS as TEST/QAS Env\n    participant PRD as PRD Env\n\n    %% === Regular Development ===\n    Dev->>Git: push branch\n    Git->>CI: trigger build/test\n\n    Dev->>Git: merge PR to main\n    Git->>CI: main pipeline\n    CI->>DEV: deploy DEV\n\n    Dev->>Git: tag vX.Y.Z-rcN\n    Git->>CI: RC pipeline\n    CI->>QAS: deploy TEST/QAS\n\n    Dev->>Git: tag vX.Y.Z\n    Git->>CI: Release pipeline\n    CI->>PRD: deploy PRD\n\n    %% === Hotfix Case ===\n    PRD->>Dev: \u767c\u73fe bug\n    Dev->>Git: checkout -b hotfix/X.Y.Z from tag vX.Y.Z\n    Dev->>Git: push hotfix branch\n    Git->>CI: build/test\n\n    Dev->>Git: tag vX.Y.Z-rcN\n    Git->>CI: RC pipeline\n    CI->>QAS: deploy TEST/QAS\n\n    Dev->>Git: tag vX.Y.Z\n    Git->>CI: Release pipeline\n    CI->>PRD: deploy PRD\n\n    Dev->>Git: PR hotfix \u2192 main\n    Git->>CI: merge pipeline\n    CI->>DEV: main \u66f4\u65b0\u5f8c DEV \u6301\u7e8c\u4e7e\u6de8"}),"\n",(0,l.jsx)(n.hr,{}),"\n",(0,l.jsx)(n.h1,{id:"\u70ba\u4ec0\u9ebc\u9019\u7a2e-flow-\u9069\u5408\u73fe\u4ee3-devops",children:"\u70ba\u4ec0\u9ebc\u9019\u7a2e Flow \u9069\u5408\u73fe\u4ee3 DevOps\uff1f"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"\u5206\u652f\u6975\u5c11 \u2192 \u6e1b\u5c11 divergence"}),"\n",(0,l.jsx)(n.li,{children:"tag \u9a45\u52d5\u90e8\u7f72 \u2192 \u7a69\u5b9a\u53ef\u8ffd\u6eaf"}),"\n",(0,l.jsx)(n.li,{children:"\u81ea\u52d5\u5316\u6e05\u6670\uff08DEV \u2192 TEST \u2192 PRD\uff09"}),"\n",(0,l.jsx)(n.li,{children:"hotfix \u53ef\u5feb\u901f\u97ff\u61c9\u6b63\u5f0f\u74b0\u5883"}),"\n",(0,l.jsx)(n.li,{children:"main \u6c38\u9060\u4fdd\u6301\u6700\u65b0\u3001\u7a69\u5b9a"}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,l.jsx)(n,{...e,children:(0,l.jsx)(c,{...e})}):c(e)}},8453:(e,n,i)=>{i.d(n,{R:()=>r,x:()=>d});var t=i(6540);const l={},s=t.createContext(l);function r(e){const n=t.useContext(s);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:r(e.components),t.createElement(s.Provider,{value:n},e.children)}}}]);