"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[3893],{7210:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>a,contentTitle:()=>l,default:()=>p,frontMatter:()=>o,metadata:()=>r,toc:()=>c});const r=JSON.parse('{"id":"devops/ci-cd-gitops-flow","title":"CI/CD + GitOps Flow\uff08\u542b Developer / Operator\uff09","description":"\u672c\u9801\u63cf\u8ff0 GitOps \u67b6\u69cb\u4e0b Source Repository\u3001Pipeline Runner\u3001Manifest Repository\u3001Kubernetes","source":"@site/docs/devops/ci-cd-gitops-flow.md","sourceDirName":"devops","slug":"/devops/ci-cd-gitops-flow","permalink":"/en/docs/devops/ci-cd-gitops-flow","draft":false,"unlisted":false,"editUrl":"https://github.com/rhincodon-studio/my-website/tree/main/docs/devops/ci-cd-gitops-flow.md","tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"id":"ci-cd-gitops-flow","title":"CI/CD + GitOps Flow\uff08\u542b Developer / Operator\uff09","sidebar_label":"CI/CD + GitOps Flow","sidebar_position":2},"sidebar":"tutorialSidebar","previous":{"title":"Multi-Org DevOps Architecture","permalink":"/en/docs/devops/multi-org-devops-architecture"},"next":{"title":"Continuous Integration","permalink":"/en/docs/category/continuous-integration"}}');var s=i(4848),t=i(8453);const o={id:"ci-cd-gitops-flow",title:"CI/CD + GitOps Flow\uff08\u542b Developer / Operator\uff09",sidebar_label:"CI/CD + GitOps Flow",sidebar_position:2},l=void 0,a={},c=[{value:"Scenario 1 \u2014 Developer \u63d0\u4ea4 Code \u2192 CI \u81ea\u52d5\u9a45\u52d5 CD",id:"scenario-1--developer-\u63d0\u4ea4-code--ci-\u81ea\u52d5\u9a45\u52d5-cd",level:2},{value:"<strong>Mermaid Sequence Diagram</strong>",id:"mermaid-sequence-diagram",level:3},{value:"Scenario 2 \u2014 Operator / Developer \u624b\u52d5\u4fee\u6539 Manifest \u2192 CD",id:"scenario-2--operator--developer-\u624b\u52d5\u4fee\u6539-manifest--cd",level:2},{value:"<strong>Mermaid Sequence Diagram</strong>",id:"mermaid-sequence-diagram-1",level:3},{value:"\u88dc\u5145\u8aaa\u660e",id:"\u88dc\u5145\u8aaa\u660e",level:2},{value:"GitOps \u6838\u5fc3\u7cbe\u795e\uff1a",id:"gitops-\u6838\u5fc3\u7cbe\u795e",level:3},{value:"Developer \u7684\u8cac\u4efb",id:"developer-\u7684\u8cac\u4efb",level:3},{value:"Operator \u7684\u8cac\u4efb",id:"operator-\u7684\u8cac\u4efb",level:3}];function d(e){const n={br:"br",h2:"h2",h3:"h3",hr:"hr",li:"li",mermaid:"mermaid",ol:"ol",p:"p",strong:"strong",ul:"ul",...(0,t.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(n.p,{children:["\u672c\u9801\u63cf\u8ff0 GitOps \u67b6\u69cb\u4e0b ",(0,s.jsx)(n.strong,{children:"Source Repository\u3001Pipeline Runner\u3001Manifest Repository\u3001Kubernetes"}),(0,s.jsx)(n.br,{}),"\n","\u4ee5\u53ca\u4f7f\u7528\u8005 ",(0,s.jsx)(n.strong,{children:"Developer / Operator"})," \u5728\u5169\u500b\u60c5\u5883\u4e2d\u7684\u4e92\u52d5\u6d41\u7a0b\uff1a"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.strong,{children:"Scenario 1\uff1aCI \u2192 \u81ea\u52d5\u66f4\u65b0 Manifest \u2192 \u81ea\u52d5 CD"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.strong,{children:"Scenario 2\uff1a\u624b\u52d5\u66f4\u65b0 Manifest \u2192 \u89f8\u767c CD"})}),"\n"]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"scenario-1--developer-\u63d0\u4ea4-code--ci-\u81ea\u52d5\u9a45\u52d5-cd",children:"Scenario 1 \u2014 Developer \u63d0\u4ea4 Code \u2192 CI \u81ea\u52d5\u9a45\u52d5 CD"}),"\n",(0,s.jsx)(n.p,{children:"\u6b64\u6d41\u7a0b\u4ee3\u8868\u6700\u5178\u578b\u7684 GitOps \u81ea\u52d5\u5316\uff1a"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsx)(n.li,{children:"Developer \u5728 Source Repo \u63a8\u7a0b\u5f0f\u78bc"}),"\n",(0,s.jsx)(n.li,{children:"CI Pipeline \u81ea\u52d5\u57f7\u884c\uff08Build/Test/Scan/Build Image\uff09"}),"\n",(0,s.jsx)(n.li,{children:"CI \u81ea\u52d5\u66f4\u65b0 Manifest Repo\uff08\u66f4\u65b0 image tag\uff09"}),"\n",(0,s.jsx)(n.li,{children:"manifest repo push \u89f8\u767c CD Pipeline"}),"\n",(0,s.jsx)(n.li,{children:"CD \u5957\u7528\u81f3 Kubernetes"}),"\n",(0,s.jsx)(n.li,{children:"Developer \u63a5\u6536 Deployment \u7d50\u679c"}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"mermaid-sequence-diagram",children:(0,s.jsx)(n.strong,{children:"Mermaid Sequence Diagram"})}),"\n",(0,s.jsx)(n.mermaid,{value:"sequenceDiagram\n    autonumber\n    participant DEV as Developer\n    participant SRC as Source Code Repository\n    participant RUN as Pipeline Runner (CI/CD)\n    participant MAN as Manifest Repository (GitOps)\n    participant K8S as Kubernetes Cluster\n\n    Note over DEV,K8S: Scenario 1 - Developer pushes code \u2192 CI \u2192 Auto Manifest Update \u2192 CD\n\n    DEV->>SRC: Push code changes<br/>Create PR / Merge\n    SRC--\x3e>RUN: Trigger CI Pipeline\n    RUN->>RUN: Build / Test / Scan / Build Image\n    RUN->>MAN: Auto-update manifest (image tag)<br/>Commit & Push\n    MAN--\x3e>RUN: Git push triggers CD pipeline\n    RUN->>K8S: Deploy updated manifest<br/>(kubectl / ArgoCD / FluxCD)\n    K8S--\x3e>DEV: Deployment Status (Success/Fail)"}),"\n",(0,s.jsx)(n.h2,{id:"scenario-2--operator--developer-\u624b\u52d5\u4fee\u6539-manifest--cd",children:"Scenario 2 \u2014 Operator / Developer \u624b\u52d5\u4fee\u6539 Manifest \u2192 CD"}),"\n",(0,s.jsx)(n.p,{children:"\u6b64\u6d41\u7a0b\u9069\u7528\u65bc\uff1a"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Hotfix"}),"\n",(0,s.jsx)(n.li,{children:"Image \u4e0d\u8b8a\u4f46\u8981\u4fee\u6539 replica/env/resources"}),"\n",(0,s.jsx)(n.li,{children:"\u624b\u52d5\u56de\u6efe\u6307\u5b9a\u7248\u672c"}),"\n",(0,s.jsx)(n.li,{children:"\u7dca\u6025\u72c0\u6cc1\u9700\u81e8\u6642\u4fee\u88dc"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"\u6d41\u7a0b\u6b65\u9a5f\uff1a"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsx)(n.li,{children:"Operator \u624b\u52d5\u4fee\u6539 Manifest Repository"}),"\n",(0,s.jsx)(n.li,{children:"Push commit \u5f8c\u89f8\u767c CD Pipeline"}),"\n",(0,s.jsx)(n.li,{children:"CD \u5957\u7528\u65b0 manifest \u81f3 Kubernetes"}),"\n",(0,s.jsx)(n.li,{children:"\u56de\u50b3\u7d50\u679c\u7d66 Operator"}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"mermaid-sequence-diagram-1",children:(0,s.jsx)(n.strong,{children:"Mermaid Sequence Diagram"})}),"\n",(0,s.jsx)(n.mermaid,{value:"sequenceDiagram\n    autonumber\n    participant OPE as Operator\n    participant MAN as Manifest Repository (GitOps)\n    participant RUN as Pipeline Runner (CD)\n    participant K8S as Kubernetes Cluster\n\n    Note over OPE,K8S: Scenario 2 - Manual Manifest Update \u2192 CD Pipeline\n\n    OPE->>MAN: Manual manifest update<br/>Edit YAML & Commit\n    MAN--\x3e>RUN: Trigger CD Pipeline\n    RUN->>K8S: Apply new manifest\n    K8S--\x3e>OPE: Deployment Status (Success/Fail)"}),"\n",(0,s.jsx)(n.h2,{id:"\u88dc\u5145\u8aaa\u660e",children:"\u88dc\u5145\u8aaa\u660e"}),"\n",(0,s.jsx)(n.h3,{id:"gitops-\u6838\u5fc3\u7cbe\u795e",children:"GitOps \u6838\u5fc3\u7cbe\u795e\uff1a"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"\u6240\u6709 Kubernetes \u6240\u9700\u72c0\u614b\u7686\u7531 Manifest Repository \u5ba3\u544a"}),"\n",(0,s.jsx)(n.li,{children:"CI \u505a Build\uff0fTest\uff0fScan\uff0c\u4e0d\u76f4\u63a5\u90e8\u7f72"}),"\n",(0,s.jsx)(n.li,{children:"CD \u5b8c\u5168\u7531 Manifest \u66f4\u65b0\u89f8\u767c"}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"developer-\u7684\u8cac\u4efb",children:"Developer \u7684\u8cac\u4efb"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"\u64b0\u5beb\u529f\u80fd"}),"\n",(0,s.jsx)(n.li,{children:"\u63a8 code\u3001\u89f8\u767c CI"}),"\n",(0,s.jsx)(n.li,{children:"\u9593\u63a5\u9a45\u52d5 CD\uff08\u900f\u904e manifest auto-update\uff09"}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"operator-\u7684\u8cac\u4efb",children:"Operator \u7684\u8cac\u4efb"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"\u7ba1\u63a7 Infra\u3001K8s cluster"}),"\n",(0,s.jsx)(n.li,{children:"\u5728\u5fc5\u8981\u6642\u624b\u52d5\u8abf\u6574 manifest"}),"\n",(0,s.jsx)(n.li,{children:"\u4e3b\u5c0e Hotfix\u3001Rollback\u3001\u8cc7\u6e90\u8abf\u6574"}),"\n"]})]})}function p(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}},8453:(e,n,i)=>{i.d(n,{R:()=>o,x:()=>l});var r=i(6540);const s={},t=r.createContext(s);function o(e){const n=r.useContext(t);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:o(e.components),r.createElement(t.Provider,{value:n},e.children)}}}]);